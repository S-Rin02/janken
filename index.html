<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style.css">
  <title>じゃんけん</title>
</head>

<body>
  <h1>Let'sじゃんけん</h1>
  <h2 id="difficulty">難易度を選択</h2>
  <button id="reset" type="button" onclick="window.location.reload()">Reset</button>
  <button id="easy" class="button" type="button">易しい</button>
  <button id="normal" class="button" type="button">普通</button>
  <button id="soHard" class="button" type="button">難しい(勝てないよ☆)</button>
  <h2 id="hand">出す手を決めよう！</h2>
  <button id="rock" class="button" type="button">グー</button>
  <button id="scissors" class="button" type="button">チョキ</button>
  <button id="paper" class="button" type="button">パー</button>
  <div id="yourHand"></div>
  <h2 id="kekka"></h2>
  <div id="result"></div>
  <script>
    let game = {
      difficulty: '',
      hand: '',
      result: '',
      yourHand: ''
    }

    let easy = document.getElementById('easy');
    let normal = document.getElementById('normal');
    let hard = document.getElementById('soHard');

    let gu = document.getElementById('rock');
    let tyoki = document.getElementById('scissors');
    let pa = document.getElementById('paper');

    let difficulty = document.getElementById('difficulty');
    let hand = document.getElementById('hand');

    easy.addEventListener('click', function() {
      game.difficulty = '易しい';
      difficulty.innerHTML = '難易度を選択 ' + game.difficulty;
      easy.disabled = true;
      normal.disabled = true;
      hard.disabled = true;

      gu.addEventListener('click', function() {
        gu.disabled = true;
        tyoki.disabled = true;
        pa.disabled = true;
        game.hand = 'グー';
        hand.innerHTML = '出す手を決めよう！' + game.hand;
        cpuHand();
      });
      tyoki.addEventListener('click', function() {
        gu.disabled = true;
        tyoki.disabled = true;
        pa.disabled = true;
        game.hand = 'チョキ';
        hand.innerHTML = '出す手を決めよう！' + game.hand;
        cpuHand();
      });
      pa.addEventListener('click', function() {
        gu.disabled = true;
        tyoki.disabled = true;
        pa.disabled = true;
        game.hand = 'パー';
        hand.innerHTML = '出す手を決めよう！' + game.hand;
        cpuHand();
      });
    });
    normal.addEventListener('click', function() {
      game.difficulty = '普通';
      difficulty.innerHTML = '難易度を選択 ' + game.difficulty;
      easy.disabled = true;
      normal.disabled = true;
      hard.disabled = true;

      gu.addEventListener('click', function() {
        gu.disabled = true;
        tyoki.disabled = true;
        pa.disabled = true;
        game.hand = 'グー';
        hand.innerHTML = '出す手を決めよう！' + game.hand;
        cpuHand();
      });
      tyoki.addEventListener('click', function() {
        gu.disabled = true;
        tyoki.disabled = true;
        pa.disabled = true;
        game.hand = 'チョキ';
        hand.innerHTML = '出す手を決めよう！' + game.hand;
        cpuHand();
      });
      pa.addEventListener('click', function() {
        gu.disabled = true;
        tyoki.disabled = true;
        pa.disabled = true;
        game.hand = 'パー';
        hand.innerHTML = '出す手を決めよう！' + game.hand;
        cpuHand();
      });
    });
    hard.addEventListener('click', function() {
      game.difficulty = '難しい';
      difficulty.innerHTML = '難易度を選択 ' + game.difficulty;
      normal.disabled = true;
      hard.disabled = true;

      gu.addEventListener('click', function() {
        gu.disabled = true;
        tyoki.disabled = true;
        pa.disabled = true;
        game.hand = 'グー';
        hand.innerHTML = '出す手を決めよう！' + game.hand;
        cpuHand();
      });
      tyoki.addEventListener('click', function() {
        gu.disabled = true;
        tyoki.disabled = true;
        pa.disabled = true;
        game.hand = 'チョキ';
        hand.innerHTML = '出す手を決めよう！' + game.hand;
        cpuHand();
      });
      pa.addEventListener('click', function() {
        gu.disabled = true;
        tyoki.disabled = true;
        pa.disabled = true;
        game.hand = 'パー';
        hand.innerHTML = '出す手を決めよう！' + game.hand;
        cpuHand();
      });
    });

    function cpuHand() {
      let random = Math.floor(Math.random() * 5);
      switch (game.difficulty) {
        case '易しい':
          switch (random) {
            case 0:
              game.result = '勝ち';
              judge();
              break;
            case 1:
              game.result = 'あいこ';
              judge();
              break;
            case 2:
              game.result = '勝ち';
              judge();
              break;
            case 3:
              game.result = '勝ち';
              judge();
              break;
            case 4:
              game.result = '負け';
              judge();
              break;
          }
          break;
        case '普通':
          switch (random) {
            case 0:
              game.result = '勝ち';
              judge();
              break;
            case 1:
              game.result = '勝ち';
              judge();
              break;
            case 2:
              game.result = '負け';
              judge();
              break;
            case 3:
              game.result = 'あいこ';
              judge();
              break;
            case 4:
              game.result = '負け';
              judge();
              break;
          }
          break;
        case '難しい':
          game.result = '負け';
          judge();
          break;
      }
    }

    function judge() {

      let music = new Audio();


      //グー
      if (game.hand == 'グー' && game.result == '勝ち') {
        game.yourHand = 'チョキ';
      }
      if (game.hand == 'グー' && game.result == '負け') {
        game.yourHand = 'パー';
        music.preload = "auto";
        music.src = "yt1s.com.mp3";
        music.load();
        music.play();
      }
      if (game.hand == 'グー' && game.result == 'あいこ') {
        game.yourHand = 'グー';
      }

      //チョキ
      if (game.hand == 'チョキ' && game.result == '勝ち') {
        game.yourHand = 'パー';
      }
      if (game.hand == 'チョキ' && game.result == '負け') {
        game.yourHand = 'グー';
        music.preload = "auto";
        music.src = "yt1s.com.mp3";
        music.load();
        music.play();
      }
      if (game.hand == 'チョキ' && game.result == 'あいこ') {
        game.yourHand = 'チョキ';
      }

      //パー
      if (game.hand == 'パー' && game.result == '勝ち') {
        game.yourHand = 'グー';
      }
      if (game.hand == 'パー' && game.result == '負け') {
        game.yourHand = 'チョキ';
        music.preload = "auto";
        music.src = "yt1s.com.mp3";
        music.load();
        music.play();
      }
      if (game.hand == 'パー' && game.result == 'あいこ') {
        game.yourHand = 'パー';
      }

      let yourHand = document.getElementById('yourHand');

      let h2 = document.createElement('h2');
      h2.innerHTML = '相手の手';
      let img = document.createElement('img')
      img.width = 300;
      img.height = 300;

      if (game.yourHand == 'グー') {
        img.src = 'janken_gu-.png';
        yourHand.appendChild(h2);
        yourHand.appendChild(img);
      }
      if (game.yourHand == 'チョキ') {
        img.src = 'janken_choki.png';
        yourHand.appendChild(h2);
        yourHand.appendChild(img);
      }
      if (game.yourHand == 'パー') {
        img.src = 'janken_pa-.png';
        yourHand.appendChild(h2);
        yourHand.appendChild(img);
      }
      let kekka = document.getElementById('kekka');
      let result = document.getElementById('result');
      let h3 = document.createElement('h3');
      kekka.innerHTML = '結果は？？';
      h3.innerHTML = game.result;
      result.appendChild(h3);
    }

    function reset() {
      location.reload();
    }
  </script>
</body>

</html>
